<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¥é¥¿äº†å—ğŸŒ‹</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #ab281a; /* éº¦å½“åŠ³çº¢è‰² */
            text-align: center;
            font-family: Arial, sans-serif;
            position: relative;
        }

        #controls {
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }

        button {
            font-size: 20px;
            padding: 10px 20px;
            margin: 5px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        #addFries { background-color: #ffcc00;border: 2px solid black; }
        #addSalt { background-color: #ffffff; border: 2px solid black; }
        #eatMode { background-color: #ff6600; color: white; border: 2px solid black;}

        /* è¯„åˆ†æ–‡å­— */
        .level-label {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: rgba(255, 255, 255, 0.472);
            font-weight: bold;
            z-index: 1;
        }

        /* é»˜è®¤éšè—å°çŒªé¼ æ ‡ */
        .pig-cursor {
            position: absolute;
            width: 100px;
            height: 100px;
            background: url('https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhLaNTtp32VdyxUQPNz5Rp6zPrFJWmKLwm0tMxgU5sI3n5wPEUlzyTdnSjRBoFyW7fvRg-JLUB1k-e3Pq9mXX573Ionmc4SSOthlD4BdzyLEKPZXedrrayIKIGynmbR9VoJeqgc2s6zd0IZ/s400/bird_kamome.png') 
                        no-repeat center / cover; /* ä¿æŒæ¸…æ™°åº¦ */
            pointer-events: none; /* è®©é¼ æ ‡èƒ½ç‚¹åˆ°ç‰©ä½“ */
            transform-origin: center center;
            transition: transform 0.2s ease-in-out;
            display: none; /* é»˜è®¤éšè— */
        }

        /* å¼€ç‚«æ¨¡å¼æ—¶ï¼Œæ˜¾ç¤ºå°çŒªé¼ æ ‡å¹¶éšè—é»˜è®¤é¼ æ ‡ */
        .eating-mode {
            cursor: none; /* éšè—é»˜è®¤é¼ æ ‡ */
        }

        .eating-mode .pig-cursor {
            display: block;
        }
    </style>
</head>
<body>

    <!-- æ§åˆ¶æŒ‰é’® -->
    <div id="controls">
        <button id="addFries">ğŸŸ é•¿æŒ‰æ‰è½è–¯æ¡</button>
        <button id="addSalt">ğŸ§‚ åŠ ç›è®°å¾—æ…åŒ€</button>
        <button id="eatMode">ğŸ˜ˆ ç‚¹æˆ‘å˜æˆæµ·é¸¥</button>
    </div>

    <!-- è¯„åˆ†çº¿ & æ ‡ç­¾ -->
    <div class="level-label" style="top: 68vh;">--------å°è–¯--------</div>
    <div class="level-label" style="top: 48vh;">--------ä¸­è–¯--------</div>
    <div class="level-label" style="top: 28vh;">--------å¤§è–¯--------</div>

    <!-- å°çŒªé¼ æ ‡ -->
    <div id="pigCursor" class="pig-cursor"></div>

    <script>
        // åˆå§‹åŒ– Matter.js
        const { Engine, Render, Runner, World, Bodies, Mouse, MouseConstraint } = Matter;
        const engine = Engine.create();
        const world = engine.world;

        // åˆ›å»ºæ¸²æŸ“å™¨
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false,
                background: '#ab281a' 
            }
        });

        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        // æ·»åŠ åœ°é¢ & å¢™å£
        const ground = Bodies.rectangle(window.innerWidth / 2, window.innerHeight - 10, window.innerWidth, 20, { 
            isStatic: true,
            render: { fillStyle: "#ffcc00" }
        });

        const leftWall = Bodies.rectangle(-10, window.innerHeight / 2, 20, window.innerHeight, { isStatic: true });
        const rightWall = Bodies.rectangle(window.innerWidth + 10, window.innerHeight / 2, 20, window.innerHeight, { isStatic: true });

        World.add(world, [ground, leftWall, rightWall]);

        let friesInterval; // å®šæ—¶å™¨å˜é‡
        let eatMode = false; // åƒè–¯æ¡æ¨¡å¼
        let friesList = []; // è®°å½•è–¯æ¡åˆ—è¡¨
        let pigSize = 1.0; // å°çŒªåˆå§‹å¤§å°

        function addFries() {
            const x = Math.random() * (window.innerWidth - 100) + 50;
            const angle = Math.random() * Math.PI;

            const fries = Bodies.polygon(x, 45, 4, 45, { 
                restitution: 0.2,  
                friction: 5,  
                density: 0.5,  
                angle: angle, 
                render: {
                    sprite: {
                        texture: "https://www.pngall.com/wp-content/uploads/4/French-Fries-PNG-Photo.png",
                        xScale: 0.3,
                        yScale: 0.3
                    }
                }
            });

            World.add(world, fries);
            friesList.push(fries);
        }

        // é•¿æŒ‰æŒ‰é’®ï¼šæŒç»­æ‰è½è–¯æ¡
        document.getElementById("addFries").addEventListener("mousedown", function() {
            addFries();
            friesInterval = setInterval(addFries, 120);
        });

        document.getElementById("addFries").addEventListener("mouseup", function() {
            clearInterval(friesInterval);
        });

        document.getElementById("addFries").addEventListener("mouseleave", function() {
            clearInterval(friesInterval);
        });
        // **åŠ ç›æŒ‰é’®åŠŸèƒ½ ğŸ§‚**
        document.getElementById("addSalt").addEventListener("click", function() {
                    for (let i = 0; i < 10; i++) {
                        const x = Math.random() * window.innerWidth;
                        const salt = Bodies.circle(x, 20, 2, {
                            restitution: 0.01, // è®©ç›ä¸ä¼šè·³å¤ªé«˜
                            friction: 500, // é€‚å½“çš„æ‘©æ“¦åŠ›
                            density: 0.000001, // è®©ç›æ¯”è¾ƒè½»
                            render: { fillStyle: "#ffffff" } // ç™½è‰²é¢—ç²’
                        });

                        World.add(world, salt);
                    }
                });
                    // æ·»åŠ é¼ æ ‡æ‹–æ‹½äº¤äº’
            const mouse = Mouse.create(render.canvas);
            const mouseConstraint = MouseConstraint.create(engine, {
                mouse: mouse,
                constraint: {
                    stiffness: 0.2,
                    render: { visible: false }
                }
            });

            World.add(world, mouseConstraint);
            render.mouse = mouse;
            
                // å¼€ç‚«æ¨¡å¼
        document.getElementById("eatMode").addEventListener("click", function () {
            eatMode = !eatMode;
            if (eatMode) {
                document.body.classList.add("eating-mode");
                document.getElementById("eatMode").textContent = "ğŸ¤¤ åƒé¥±å•¦..";
            } else {
                document.body.classList.remove("eating-mode");
                document.getElementById("eatMode").textContent = "ğŸ˜ˆ ç‚¹æˆ‘å˜æˆæµ·é¸¥";
                pigSize = 1.0; // é€€å‡ºæ¨¡å¼åé‡ç½®å¤§å°
                document.getElementById("pigCursor").style.transform = `scale(${pigSize})`;
            }
        });

        // ç›‘å¬é¼ æ ‡ç§»åŠ¨ï¼Œæ›´æ–°å°çŒªä½ç½®
        document.addEventListener("mousemove", function (event) {
            if (!eatMode) return;

            pigCursor.style.left = `${event.clientX - 25}px`;
            pigCursor.style.top = `${event.clientY - 25}px`;

            for (let i = friesList.length - 1; i >= 0; i--) {
                const fries = friesList[i];
                const x = fries.position.x;
                const y = fries.position.y;

                if (Math.abs(x - event.clientX) < 30 && Math.abs(y - event.clientY) < 30) {
                    World.remove(world, fries);
                    friesList.splice(i, 1);
                    if (pigSize < 10) {
                        pigSize += 0.1;
                        pigCursor.style.transform = `scale(${pigSize})`;
                    }
                }
            }
        });
    </script>
</body>
</html>
